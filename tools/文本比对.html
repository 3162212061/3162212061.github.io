<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡æœ¬æ¯”å¯¹å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .text-input-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .text-box {
            display: flex;
            flex-direction: column;
        }

        .text-box label {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .text-box label span {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            margin-right: 10px;
            font-size: 0.9em;
        }

        .text-box textarea {
            flex: 1;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            line-height: 1.6;
            resize: vertical;
            font-family: 'Courier New', monospace;
            transition: border-color 0.3s;
        }

        .text-box textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .button-area {
            text-align: center;
            margin-bottom: 30px;
        }

        .compare-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 50px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .compare-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .compare-btn:active {
            transform: translateY(-1px);
        }

        .result-area {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
        }

        .similarity-result {
            text-align: center;
            margin-bottom: 20px;
        }

        .similarity-circle {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
        }

        .circle-bg {
            fill: none;
            stroke: #e0e0e0;
            stroke-width: 10;
        }

        .circle-progress {
            fill: none;
            stroke: #4CAF50;
            stroke-width: 10;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dasharray 1s ease;
        }

        .similarity-percent {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2em;
            font-weight: bold;
            color: #333;
        }

        .similarity-percent span {
            font-size: 0.5em;
            color: #666;
        }

        .similarity-text {
            font-size: 1.3em;
            color: #333;
            font-weight: 600;
        }

        .highlighted-text-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .highlighted-text {
            background: white;
            border-radius: 10px;
            padding: 20px;
            min-height: 200px;
            border: 2px solid #e0e0e0;
            line-height: 1.8;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .legend-color.same {
            background: #4CAF50;
        }

        .legend-color.diff {
            background: #F44336;
        }

        .legend-text {
            color: #333;
            font-weight: 500;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .action-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-btn.clear {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #ddd;
        }

        .action-btn.clear:hover {
            background: #e9ecef;
        }

        .action-btn.swap {
            background: #FF9800;
            color: white;
        }

        .action-btn.swap:hover {
            background: #F57C00;
        }

        @media (max-width: 768px) {
            .text-input-area,
            .highlighted-text-area {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .similarity-circle {
                width: 120px;
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” æ–‡æœ¬æ¯”å¯¹å·¥å…·</h1>
            <p>å¿«é€Ÿæ¯”è¾ƒä¸¤æ®µæ–‡æœ¬çš„å·®å¼‚ï¼Œè®¡ç®—ç›¸ä¼¼åº¦ï¼Œå¹¶é«˜äº®æ˜¾ç¤ºä¸åŒä¹‹å¤„</p>
        </div>

        <div class="main-content">
            <!-- æ–‡æœ¬è¾“å…¥åŒºåŸŸ -->
            <div class="text-input-area">
                <div class="text-box">
                    <label><span>1</span>ç¬¬ä¸€æ®µæ–‡æœ¬</label>
                    <textarea id="text1" rows="10" placeholder="è¯·è¾“å…¥æˆ–ç²˜è´´ç¬¬ä¸€æ®µæ–‡æœ¬...">GitHubæ˜¯ä¸€ä¸ªé¢å‘å¼€æºåŠç§æœ‰è½¯ä»¶é¡¹ç›®çš„æ‰˜ç®¡å¹³å°ï¼Œå› ä¸ºåªæ”¯æŒGitä½œä¸ºå”¯ä¸€çš„ç‰ˆæœ¬åº“æ ¼å¼è¿›è¡Œæ‰˜ç®¡ï¼Œæ•…åGitHubã€‚</textarea>
                </div>
                <div class="text-box">
                    <label><span>2</span>ç¬¬äºŒæ®µæ–‡æœ¬</label>
                    <textarea id="text2" rows="10" placeholder="è¯·è¾“å…¥æˆ–ç²˜è´´ç¬¬äºŒæ®µæ–‡æœ¬...">GitHubæ˜¯ä¸€ä¸ªé¢å‘å¼€æºåŠç§æœ‰è½¯ä»¶é¡¹ç›®çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼Œä»…æ”¯æŒGitä½œä¸ºç‰ˆæœ¬åº“æ ¼å¼è¿›è¡Œæ‰˜ç®¡ï¼Œå› æ­¤åä¸ºGitHubã€‚</textarea>
                </div>
            </div>

            <!-- æ¯”å¯¹æŒ‰é’® -->
            <div class="button-area">
                <button class="compare-btn" onclick="compareTexts()">
                    ğŸ”„ å¼€å§‹æ¯”å¯¹
                </button>
            </div>

            <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->
            <div class="result-area" id="resultArea" style="display: none;">
                <div class="similarity-result">
                    <div class="similarity-circle">
                        <svg width="100%" height="100%" viewBox="0 0 42 42">
                            <circle class="circle-bg" cx="21" cy="21" r="15.9155"></circle>
                            <circle class="circle-progress" cx="21" cy="21" r="15.9155" id="progressCircle"></circle>
                        </svg>
                        <div class="similarity-percent" id="similarityPercent">0%</div>
                    </div>
                    <div class="similarity-text" id="similarityText">ç›¸ä¼¼åº¦</div>
                </div>

                <!-- é«˜äº®æ–‡æœ¬å±•ç¤º -->
                <div class="highlighted-text-area">
                    <div class="highlighted-text" id="highlightedText1"></div>
                    <div class="highlighted-text" id="highlightedText2"></div>
                </div>

                <!-- å›¾ä¾‹ -->
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color same"></div>
                        <div class="legend-text">ç›¸åŒå†…å®¹</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color diff"></div>
                        <div class="legend-text">ä¸åŒå†…å®¹</div>
                    </div>
                </div>

                <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="totalChars">0</div>
                        <div class="stat-label">æ€»å­—ç¬¦æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="sameChars">0</div>
                        <div class="stat-label">ç›¸åŒå­—ç¬¦æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="diffChars">0</div>
                        <div class="stat-label">ä¸åŒå­—ç¬¦æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="diffWords">0</div>
                        <div class="stat-label">å·®å¼‚è¯æ•°</div>
                    </div>
                </div>
            </div>

            <!-- æ“ä½œæŒ‰é’® -->
            <div class="action-buttons">
                <button class="action-btn clear" onclick="clearTexts()">
                    ğŸ—‘ï¸ æ¸…ç©ºæ–‡æœ¬
                </button>
                <button class="action-btn swap" onclick="swapTexts()">
                    ğŸ”„ äº¤æ¢æ–‡æœ¬
                </button>
            </div>
        </div>
    </div>

    <script>
        /**
         * è®¡ç®—ä¸¤æ®µæ–‡æœ¬çš„ç›¸ä¼¼åº¦
         * ä½¿ç”¨åŸºäºç¼–è¾‘è·ç¦»çš„ç›¸ä¼¼åº¦ç®—æ³•
         */
        function calculateSimilarity(text1, text2) {
            // å¦‚æœä¸¤æ®µæ–‡æœ¬éƒ½ä¸ºç©ºï¼Œåˆ™ç›¸ä¼¼åº¦ä¸º100%
            if (!text1 && !text2) return 100;
            
            // å¦‚æœå…¶ä¸­ä¸€æ®µä¸ºç©ºï¼Œåˆ™ç›¸ä¼¼åº¦ä¸º0%
            if (!text1 || !text2) return 0;
            
            // è®¡ç®—ç¼–è¾‘è·ç¦»ï¼ˆLevenshteinè·ç¦»ï¼‰
            const m = text1.length;
            const n = text2.length;
            
            // åˆ›å»ºäºŒç»´æ•°ç»„
            const dp = Array(m + 1).fill().map(() => Array(n + 1).fill(0));
            
            // åˆå§‹åŒ–è¾¹ç•Œæ¡ä»¶
            for (let i = 0; i <= m; i++) dp[i][0] = i;
            for (let j = 0; j <= n; j++) dp[0][j] = j;
            
            // åŠ¨æ€è§„åˆ’è®¡ç®—ç¼–è¾‘è·ç¦»
            for (let i = 1; i <= m; i++) {
                for (let j = 1; j <= n; j++) {
                    const cost = text1[i - 1] === text2[j - 1] ? 0 : 1;
                    dp[i][j] = Math.min(
                        dp[i - 1][j] + 1,     // åˆ é™¤
                        dp[i][j - 1] + 1,     // æ’å…¥
                        dp[i - 1][j - 1] + cost  // æ›¿æ¢æˆ–åŒ¹é…
                    );
                }
            }
            
            const distance = dp[m][n];
            const maxLength = Math.max(m, n);
            
            // è®¡ç®—ç›¸ä¼¼åº¦ç™¾åˆ†æ¯”
            const similarity = maxLength === 0 ? 100 : ((maxLength - distance) / maxLength) * 100;
            return Math.round(similarity * 100) / 100; // ä¿ç•™ä¸¤ä½å°æ•°
        }
        
        /**
         * ç”Ÿæˆé«˜äº®æ˜¾ç¤ºçš„HTML
         * ä½¿ç”¨åŸºäºå­—ç¬¦çš„å·®å¼‚æ¯”è¾ƒç®—æ³•
         */
        function highlightDifferences(text1, text2) {
            const result1 = [];
            const result2 = [];
            
            let i = 0, j = 0;
            
            // æ‰¾å‡ºæœ€é•¿çš„å…¬å…±å­åºåˆ—
            while (i < text1.length && j < text2.length) {
                if (text1[i] === text2[j]) {
                    // ç›¸åŒå­—ç¬¦ï¼Œç”¨ç»¿è‰²é«˜äº®
                    result1.push(`<span style="background-color: #4CAF50; color: white; padding: 0 2px; border-radius: 2px;">${escapeHtml(text1[i])}</span>`);
                    result2.push(`<span style="background-color: #4CAF50; color: white; padding: 0 2px; border-radius: 2px;">${escapeHtml(text2[j])}</span>`);
                    i++;
                    j++;
                } else {
                    // æŸ¥æ‰¾è¿ç»­çš„å·®å¼‚æ®µ
                    let diffStart1 = i;
                    let diffStart2 = j;
                    
                    // å‘å‰æ‰«æç›´åˆ°æ‰¾åˆ°ç›¸åŒçš„å­—ç¬¦æˆ–åˆ°è¾¾ç»“å°¾
                    while ((i < text1.length && j < text2.length) && 
                           (text1[i] !== text2[j])) {
                        i++;
                        j++;
                    }
                    
                    // æ·»åŠ å·®å¼‚éƒ¨åˆ†ï¼ˆçº¢è‰²é«˜äº®ï¼‰
                    const diff1 = text1.substring(diffStart1, i);
                    const diff2 = text2.substring(diffStart2, j);
                    
                    if (diff1) {
                        result1.push(`<span style="background-color: #F44336; color: white; padding: 0 2px; border-radius: 2px; font-weight: bold;">${escapeHtml(diff1)}</span>`);
                    }
                    if (diff2) {
                        result2.push(`<span style="background-color: #F44336; color: white; padding: 0 2px; border-radius: 2px; font-weight: bold;">${escapeHtml(diff2)}</span>`);
                    }
                }
            }
            
            // å¤„ç†å‰©ä½™éƒ¨åˆ†
            if (i < text1.length) {
                const remaining = text1.substring(i);
                result1.push(`<span style="background-color: #F44336; color: white; padding: 0 2px; border-radius: 2px; font-weight: bold;">${escapeHtml(remaining)}</span>`);
            }
            
            if (j < text2.length) {
                const remaining = text2.substring(j);
                result2.push(`<span style="background-color: #F44336; color: white; padding: 0 2px; border-radius: 2px; font-weight: bold;">${escapeHtml(remaining)}</span>`);
            }
            
            return {
                html1: result1.join(''),
                html2: result2.join('')
            };
        }
        
        /**
         * è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
         */
        function calculateStatistics(text1, text2, highlighted1, highlighted2) {
            const totalChars = text1.length + text2.length;
            
            // è®¡ç®—ç›¸åŒå­—ç¬¦æ•°ï¼ˆé€šè¿‡ç»Ÿè®¡ç»¿è‰²é«˜äº®éƒ¨åˆ†ï¼‰
            const sameInText1 = (highlighted1.match(/style="[^"]*background-color: #4CAF50[^"]*"/g) || []).length;
            const sameInText2 = (highlighted2.match(/style="[^"]*background-color: #4CAF50[^"]*"/g) || []).length;
            const sameChars = Math.max(sameInText1, sameInText2);
            
            // è®¡ç®—ä¸åŒå­—ç¬¦æ•°
            const diffChars = totalChars - (sameChars * 2);
            
            // è®¡ç®—å·®å¼‚è¯æ•°ï¼ˆç®€å•çš„ç©ºæ ¼åˆ†å‰²ï¼‰
            const words1 = text1.split(/\s+/).filter(w => w);
            const words2 = text2.split(/\s+/).filter(w => w);
            const diffWords = Math.abs(words1.length - words2.length);
            
            return {
                totalChars,
                sameChars,
                diffChars,
                diffWords
            };
        }
        
        /**
         * HTMLç‰¹æ®Šå­—ç¬¦è½¬ä¹‰
         */
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        /**
         * æ›´æ–°åœ†å½¢è¿›åº¦æ¡
         */
        function updateProgressCircle(percent) {
            const circle = document.getElementById('progressCircle');
            const radius = 15.9155;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (percent / 100) * circumference;
            
            circle.style.strokeDasharray = `${circumference} ${circumference}`;
            circle.style.strokeDashoffset = offset;
            
            // æ ¹æ®ç›¸ä¼¼åº¦è®¾ç½®ä¸åŒçš„é¢œè‰²
            if (percent >= 80) {
                circle.style.stroke = '#4CAF50'; // ç»¿è‰²
            } else if (percent >= 60) {
                circle.style.stroke = '#FFC107'; // é»„è‰²
            } else if (percent >= 40) {
                circle.style.stroke = '#FF9800'; // æ©™è‰²
            } else {
                circle.style.stroke = '#F44336'; // çº¢è‰²
            }
        }
        
        /**
         * è·å–ç›¸ä¼¼åº¦æè¿°
         */
        function getSimilarityDescription(percent) {
            if (percent >= 95) return 'å‡ ä¹å®Œå…¨ç›¸åŒ';
            if (percent >= 80) return 'éå¸¸ç›¸ä¼¼';
            if (percent >= 60) return 'æ¯”è¾ƒç›¸ä¼¼';
            if (percent >= 40) return 'æœ‰äº›ç›¸ä¼¼';
            if (percent >= 20) return 'å·®å¼‚è¾ƒå¤§';
            return 'å®Œå…¨ä¸åŒ';
        }
        
        /**
         * ä¸»æ¯”å¯¹å‡½æ•°
         */
        function compareTexts() {
            const text1 = document.getElementById('text1').value;
            const text2 = document.getElementById('text2').value;
            
            // è®¡ç®—ç›¸ä¼¼åº¦
            const similarity = calculateSimilarity(text1, text2);
            
            // ç”Ÿæˆé«˜äº®æ–‡æœ¬
            const highlighted = highlightDifferences(text1, text2);
            
            // è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
            const stats = calculateStatistics(text1, text2, highlighted.html1, highlighted.html2);
            
            // æ›´æ–°UI
            document.getElementById('similarityPercent').innerHTML = `${similarity}<span>%</span>`;
            document.getElementById('similarityText').textContent = getSimilarityDescription(similarity);
            document.getElementById('highlightedText1').innerHTML = highlighted.html1 || '<span style="color: #999;">æ— å†…å®¹</span>';
            document.getElementById('highlightedText2').innerHTML = highlighted.html2 || '<span style="color: #999;">æ— å†…å®¹</span>';
            
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            document.getElementById('totalChars').textContent = stats.totalChars;
            document.getElementById('sameChars').textContent = stats.sameChars;
            document.getElementById('diffChars').textContent = Math.max(0, stats.diffChars);
            document.getElementById('diffWords').textContent = stats.diffWords;
            
            // æ›´æ–°è¿›åº¦æ¡
            updateProgressCircle(similarity);
            
            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            document.getElementById('resultArea').style.display = 'block';
            
            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            document.getElementById('resultArea').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }
        
        /**
         * æ¸…ç©ºæ–‡æœ¬
         */
        function clearTexts() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºä¸¤æ®µæ–‡æœ¬å—ï¼Ÿ')) {
                document.getElementById('text1').value = '';
                document.getElementById('text2').value = '';
                document.getElementById('resultArea').style.display = 'none';
            }
        }
        
        /**
         * äº¤æ¢æ–‡æœ¬
         */
        function swapTexts() {
            const text1 = document.getElementById('text1');
            const text2 = document.getElementById('text2');
            const temp = text1.value;
            text1.value = text2.value;
            text2.value = temp;
        }
        
        /**
         * é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
         */
        document.addEventListener('DOMContentLoaded', function() {
            // ä¸ºæ–‡æœ¬æ¡†æ·»åŠ é”®ç›˜å¿«æ·é”®æ”¯æŒ
            document.getElementById('text1').addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    compareTexts();
                }
            });
            
            document.getElementById('text2').addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    compareTexts();
                }
            });
            
            // è®¾ç½®åˆå§‹è¿›åº¦æ¡
            updateProgressCircle(0);
        });
    </script>
</body>
</html>